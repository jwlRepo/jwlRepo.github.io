<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>JW Website</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<div class="inner">
					<a href="#" class="image avatar"><img src="images/avatar.jpg" alt="" /></a>
					<h1><strong>Jia Wen Lee</strong></h1>
					</h2><a href="index.html">About</a></h2></br>
					</h2><a href="projects.html">Projects</a></h2></br>
					</h2><a href="ABE516Project.html">ABE516 Project</a></h2></br>
					</h2><a href="assets/doc/JWResume.pdf" target="_blank">Resume</a></h2></br>
				</div>
			</header>

		<!-- Main -->
			<div id="main">

				<!-- One -->
					<section id="one">
						<header class="major">
							<h2>ABE 516x Project</h2>
						</header>
						<p>Description<br />This is the Final project for ABE516x. I will be applying what I've leant in the Fall 2019 sememster on data processing and machine learning to process and analyze LiDAR point cloud data I have collected. </p>
						<!--ul class="actions">
							<li><a href="#" class="button">Learn More</a></li>
						</ul-->
					</section>

				<!-- Two-->
				<section id="two">
					<div class="row">  
						<article class="max work-item">

							<h3>Project Goal</h3>
							<p>My hope for this project is to gain more understanding on the relationship between different Tillage settings on a ripper tool and the resulting soil profile. 
							</br>I want to see if I can predict the resulting soil roughness and soil surface residue based on tillage settings.</p>
						</br>

							<h3>Objectives</h3>
							<p>-Find out if I can predict tillage metrics base on tillage tool configuration.</p>
							<p>-Investigate what regression models would be best for the LiDAR data I have.</p>
							<p>-Find out correlation between specific tillage settings and resulting soil measurement.</p>
						</br>
						
							<h3>Workflow</h3>
						</article>
						</br>

						<article class="off-3 col-7 col-12-xsmall work-item">
							<a href="assets/pics/ABE516Flowchart.jpeg" target="_blank" class="image fit thumb"><img src="assets/pics/ABE516Flowchart.jpeg" alt=""/></a>
						</article>

						</br>
						<article class="max work-item">
							<h3>Background and measurement terms</h3> 
							<p>Data was collected from a LiDAR mounted perpendicular to the ground on a tillage implement.
							A point cloud of the soil surface after tillage is generated by taking scans when the tillage implement is pulled by the tractor as shown in the image below.</p>
						</article>

						<article class="off-3 col-9 col-18-xsmall work-item">
								<a href="assets/pics/tillageSetup.jpg" target="_blank" class="image fit thumb"><img src="assets/pics/tillageSetup.jpg" alt=""/></a>
						</article>
						</br>
						<article class="max work-item">
						</br>
						<p>A good measurement of soil profile is important in developing a closed-loop control system for optimizing the tillage process.</p>
							<p>How the field is tilled can affect erosion, fertilizer runoff, soil nutrient and soil structure of the field so it is important to be
								able to measure and control the soil profile created from tillage.
							</p>
						</br>
						<h5><b>Measured Metrics:</b></h5>
							<p>1) Soil roughness metric - A measure of how uneven or flat the soil surface is. Will be further explained in the data processing section.</p>
						</br>
							<p>2) Soil surface residue percentage - Percentage of soil covered by soil residue measured based on LiDAR RSSI</p>
						</br>
							<p>3) RSSI - <a href="https://www.sick.com/us/en/glossary/rssi/g/p555555" target="_blank">Relative Signal Strength Index</a></p>
						</br>
							<p>4) Soil surface residue - Organic matter present on top of the soil. An example is circled in red in the image below</p>
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
							<a href="assets/pics/surfResEx.png" target="_blank" class="image fit thumb"><img src="assets/pics/surfResEx.png" alt=""/></a>
						</article>
						
						<article class="max work-item">
						</br>
							<h5><b>Factors:</b></h5>
							<p>1) disk_in - Depth set in inches of front disk on the tillage implement.</p>
						</br>
							<p>2) closingDisk - Depth set in inches of back disk on the tillage implement, -6 is out of the ground.</p>   
						</br>
							<p>3) basket - True, false on whether or not basket was off the ground, 1 means baskets were off the bround and 0 means baskets were on the ground.</p> 
						</br>
							<p>4) speed_mph - Forward velocity in mph.</p> 
						</br>
						</article>	
						
						<article class="off-3 col-9 col-12-xsmall work-item">
								<p>Tillage implement segments</p>
								<a href="assets/pics/tillageSegments.jpg" target="_blank" class="image fit thumb"><img src="assets/pics/tillageSegments.jpg" alt=""/></a>
						</article>
						
						<article class="max work-item">
							<h3>Data processing</h3>			
							<p>Data processing was done in MATLAB. Data and exact steps to convert point cloud data into a roughness metric and surface residue percentage will not be provided
								as there might be proprietary implecations with that. Another note is that currently not all data has been process so there are low resolution in some of the factors measured.
							    I will however give a brief overview of how metrics were obtained.</br></p>
						</br>
							<h5>Roughness</h5>
							<p>Rougness is quantified by the <a href="https://gisgeography.com/root-mean-square-error-rmse-gis" target="_blank">root mean squared error</a> calculated for 
								each individual scan. Mean of root mean sqaured error over 700 consecutive scans is then taken to obtain a roughness metric for a specific set of factors.
							</p>
						</br>
							<h5>Surface Residue</h5>
							<p>Surface Residue quantified using k-mean clustering from a point cloud data set where both surface residue and soil were present. 
								A full write up of the clustering process can be found <a href="https://github.com/jwlRepo/516x/tree/master/module3/kmeanResidue" target="_blank">here</a>. 
						</br>resPercent represents the residue percentage estimate from a -1.5m to 1.5m scan width on the back of the tillage implement.
						</br>resPercentFull represents the residue percentage estimate from a -3.5m to 3.5m scan width which is the full width of the tillage implement.
						</br>
							Resulting data table can be found <a href="https://github.com/jwlRepo/516x/blob/master/Project/tillageTestSummaryResult.csv">here</a>.
						</br>
							Data was then passed into python for data analysis.
							</p>
						</br>
							<h3>Statistical analysis</h3>
							<p>Full code <a href="https://github.com/jwlRepo/516x/blob/master/Project/tillageModel.ipynb">here</a>.</p>
								<p>First we want to see what kind of correlation each factor has with roughness and surface residue. For this we use the .corr method from a pandas dataframe and make a heatmap of correlations
									using seaborn. Correlation is done both with the default 'pearson' method as well as the 'spearman' method which is more robust in finding correlation if there is a possibility that relationship
								is non-linear. Refer to this <a href="https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide.php">link</a> for a more in depth explanation. 
						</br></p>
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
								<p>Pearson Heatmap</p>
								<a href="assets/pics/pearsonHeatMap.png" target="_blank" class="image fit thumb"><img src="assets/pics/pearsonHeatMap.png" alt=""/></a>
						</br>
								<p>Spearman Heatmap</p>
								<a href="assets/pics/spearmanHeatMap.png" target="_blank" class="image fit thumb"><img src="assets/pics/spearmanHeatMap.png" alt=""/></a>
						</article>

						</br>
						<article class="max work-item">
							<p>From the heat map, it can be seen that roughness is mostly correlated with basket and speed. 
								while full surface residue precentage is mostly correlated with front disk depth and speed.
								Spearman heat map shows a potential correlation between closing disk and roughness.
							</p></br>
							<p>Box plots are made to further visualize the relationship:</p></br>
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
								<p>Boxplot of factors against roughness</p>
								<a href="assets/pics/boxplots.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/boxplots.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
							<p>Box plot of roughness show a large step response between when the basket is up vs when basket is down, due to the boolean nature of the 
								factor, high correlation might just be due to the binary nature of the factor. Closing disk looks to have a non-linear relationship however more resolution
								in the x-axis would help better confirm the relationship.  
							</p></br>
						</article>
						
						<article class="off-3 col-9 col-12-xsmall work-item">
								<p>Boxplot of factors against surface residue percentage</p>
								<a href="assets/pics/boxplotsRes.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/boxplotsRes.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
							<p>Box plot of residue shows a clear relationship between front disk depth and surface residue. 
								Median of surface residue percentage and variance of seem to decrease with speed
							</p></br>
						</article>

						<article class="max work-item">
							<h3>Regression models</h3>
							<p>Full code <a href="https://github.com/jwlRepo/516x/blob/master/Project/tillageModel.ipynb">here</a>.</p>
							<p>5 regression models were used to try and create a predictive model for the data set for both roughness and surface residue percentage.
							Linear models chosen for comparison were, <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html">Linear Regression</a>
							, <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.Ridge.html#sklearn.linear_model.Ridge" target="_blank">Ridge Regression</a>, 
							<a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.ElasticNet.html#sklearn.linear_model.ElasticNet" target="_blank">ElasticNet</a>, 
							<a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.Lasso.html#sklearn.linear_model.Lasso" target="_blank">Lasso</a> and 
							<a href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html#sklearn.svm.SVR" target="_blank">State Vector Regression</a>.</p></br>
							<p>Models were mainly chosen by following the regression branch on the scikit-learn algorithm cheat-sheet</p>
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
								<a href="https://scikit-learn.org/stable/tutorial/machine_learning_map/index.html" target="_blank" class="image fit thumb"><img src="assets/pics/regressionbranch.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
						</br>
						<p>Linear Regression model provides a simple regression model which serve as a baseline comparison for all the other regression models. Lasso, Ridge Regression
							and ElasticNet models all use a form of <a href="http://www.chioka.in/differences-between-l1-and-l2-as-loss-function-and-regularization/">loss function and regularization</a>.
							Lasso uses L1 regularization; Ridge Regression uses L2 regularization while ElasticNet balaces between both L1 and L2 regularization.
						</p>
						<p>More information on comparison between Linear, Ridge, Lasso and ElasticNet can be found <a href="https://www.analyticsvidhya.com/blog/2017/06/a-comprehensive-guide-for-linear-ridge-and-lasso-regression/">here</a>.</p>
						</br><p>SVR with a <a href="https://en.wikipedia.org/wiki/Radial_basis_function">rbf(radial basis function)</a> kernel provides a <a href="https://scikit-learn.org/stable/auto_examples/svm/plot_svm_regression.html">non-linear model</a> for the comparison.</p></br>
							<p>Data set was split into training and test sets with a fixed random seed so that resulting metrics were comparable. 
								Factors were scaled so resulting coefficients for each factors were comparable.</p>
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
								<a href="assets/pics/trainNScale.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/trainNScale.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
								<p>A function was written to take in data frame of factors and result to easily automate training and testing of all 5 models for different X and Y values. Models were use 
								to predict Y values of test data and model results were compare with RMSE and R2 metrics.</p></br>  
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
								<a href="assets/pics/modelFunction.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/modelFunction.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
							</br><h5>Result and discussion:</h5> 
						</article>

						<article class="off-3 col-9 col-12-xsmall work-item">
							<p>Function Execution</p>
							<a href="assets/pics/functionRun.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/functionRun.JPG" alt=""/></a>
						</br>
							<p>RMSE and R2 values from regression models for roughness</p>
							<a href="assets/pics/roughnessTable.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/roughnessTable.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
							<p>Table of RMSE and R2 of models for roughness shows that the ElasticNet and Lasso model performed the worst, followed by SVR.  Ridge and the Linear Regression model
								performed roughly the same. Result shows that there were no noticable difference between using 2 factors and using 4 factors. This suggests that relationship can be best
								explain through a linear model and that main factors that affect roughness are speed of tillage and the use of baskets. Usage of L2 loss function performed better that algorithms
								that utilised L1 loss function although a simple linear regression model performed just as well as the Ridge model meaning that any form of regularization is probably unneccesary.     
							</p></br>
						</article>
						
						<article class="off-3 col-9 col-12-xsmall work-item">
							<p>RMSE and R2 values from regression models for surface residue</p>
							<a href="assets/pics/resTable.JPG" target="_blank" class="image fit thumb"><img src="assets/pics/resTable.JPG" alt=""/></a>
						</article>

						<article class="max work-item">
						</br><h5>Concluding thoughts:</h5> 
							<p>Table of RMSE and R2 of regression models for surface residue shows that once again ElasticNet model performed the worst follow by the Lasso, Ridge and the Linear model.
								SVR performed really well for surface residue. Increasing the factors from 2 to 4 seems to slightly increase the R2 value of the SVR model. The fact that SVR with rbf kernel performs
							better than the linear regression models shows that the relationship we have might be more non-linear than linear.</p></br>

							<p>Overall, best models for roughness explain up to 45% of the variance which is satisfactory considering the larger amount of environmental factors that come into play in agriculture. Surface residue percentage
								 models performed quite well with the best R2 value of 60%. Project has helped me see which factors in tillage has the largest influece on resulting soil profile. Concepts used from the class includes all the data processing and visualization libraries to help make sense of the data including pandas, seaborn boxplot and heatmap
								and getting correlations from all factor involved. This class has helped me better understand differences between machine learning models and most importantly where to find documentation to understand and use these models.</p>
							</br>
							<p>Moving forwards, I think data input used for these models can be improved as mentioned earlier, not all the data has been processed. More data points with higher resultion for closing disk and speed would help better define 
								relationships between these factors and resulting surface roughness and residue. </p></br></br>
						</article>
						
						<article>
						<h3>Guided task</h3>
						<p>A Guided task for regression models for the Lidar data set can be found <a href="https://github.com/jwlRepo/516x/blob/master/Project/task.ipynb">here</a>.</p>
						</article>
					</div>
				</section>




			</div>

		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<ul class="icons">
						<li><a href="https://github.com/thismightnotwork" class="icon brands fa-github"><span class="label">Github</span></a></li>
						<li><a href="https://www.linkedin.com/in/jia-wen-lee-4a581a192/" class="icon brands fa-linkedin"><span class="label">linked</span></a></li>
						<li><a href="mailto:jwleehere@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.poptrox.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>